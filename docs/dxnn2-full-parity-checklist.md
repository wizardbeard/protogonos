# DXNN2 Full Parity Checklist (Reference `.ref/src`)

Snapshot date: 2026-02-12

Status keys:
- `done`: implemented and covered by tests in current Go rewrite.
- `partial`: implemented baseline behavior, but reference breadth/edge semantics still incomplete.
- `todo`: not yet implemented for parity.
- `n/a`: intentionally out of scope for strict core parity in this phase.

## Module parity matrix

| Reference module | Status | Notes |
|---|---|---|
| `polis.erl` | `done` | Core lifecycle + persistence orchestration implemented, including idempotent init/start state, explicit stop lifecycle with reason surface (`normal`/`shutdown`) plus tracked last-stop reason, package-level default runtime registry APIs mirroring `whereis(polis)`-style singleton lifecycle (`StartDefault`/`Default`/`StopDefault`) plus `sync/0` analog via `SyncDefault`/`Polis.Sync`, explicit call/cast protocol analogs (`Call`/`Cast`) for reference message surface (`get_scape` by public type, stop reason call/cast, init cast) now processed through a channel-backed mailbox actor loop with init/stop lifecycle and explicit init-state payload handling (`InitCast{State: ...}` / `InitWithState`), scape lookup semantics by both registered name and configured public scape type (`GetScapeByType`, ordered first-in-list semantics across dynamic add/remove), configured supporting-module start/stop lifecycle plus online add/remove management (`AddSupportModule`/`AddSupportModuleWithPolicy`/`RemoveSupportModule`), configured public-scape autostart with tracked scape summary metadata (`type`/`parameters`/`metabolics`/`physics`/`restart_policy`) plus summary-aware managed startup hooks (`StartWithSummary`) and online add/remove management (`AddPublicScape`/`RemovePublicScape`), and a Go-native supervision abstraction (`Supervisor`) with restart/backoff policy, strategy support (`one_for_one`, `one_for_all`) including recoverable-failure sibling restart orchestration with policy-aware `temporary`/`transient` handling, child-spec metadata/status surface (`SupervisorChildSpec`/`ActiveSupervisedChildren` with group/restart policy/restart counters/last error), restart-policy surface (`permanent`/`transient`/`temporary`), permanent-failure hooks, restart-exhaustion tracking (`SupervisionFailures`), and optional polis shutdown escalation (`EscalateOnSupervisorFailure`, default reason `shutdown`) for optional long-lived `Supervise(ctx)` loops on support modules and public scapes, explicit `create`/`reset` lifecycle APIs backed by storage reset capability (reset now uses shutdown-style teardown), and CLI exposure via `protogonosctl reset`. |
| `population_monitor.erl` | `done` | Generation loop, species-aware selection, quotas, diagnostics, lineage, and lifecycle control surface implemented, including early-stop controls (`fitness_goal`, `evaluations_limit`), `survival_percentage`-driven elite retention, `specie_size_limit` parent-pool capping, pause/continue/stop/goal/print control-channel semantics with live run control via platform/API and explicit `run_id`, continuation from persisted population snapshots (`continue_population_id`), success-only mutation-step retries, explicit evolution-mode surface (`generational`/`steady_state`) via config materialization/runtime wiring (`evolution_type` / `constraint.population_evo_alg_f`), reference-closer `steady_state` single-offspring replacement per cycle, step-sized trace callbacks (`trace_step_size`, default `500`) with completion notifications, step-window `gather_STATS`-style accumulation (`step_evaluations`, `step_cycles`, `step_time`, per-species evaluation counts), expanded per-species stat payloads (`avg/std/min/max fitness`, `avg/std neurons`, diversity, champion id), validation/test champion probe metrics with mode-aware routing (`validation`/`test`) and reference-style validation-triggered test probing, in-flight command processing while worker evaluations are active, and reference-closer goal lifecycle accounting (post-signal evaluation counting suppression), with CLI/API/config exposure (`monitor goal-reached|print-trace`, `--trace-step-size`, `--validation-probe`, `--test-probe`, `trace.step_size` / `trace_step_size`). |
| `genotype.erl` | `done` | Seed/clone/lifecycle/store flows implemented, including reference-closer agent deletion semantics that now prune removed agent genomes from persistence during population membership reconciliation, expanded topology signature summaries with reference-style `type`/`tot_n_ils`/`tot_n_ols`/`tot_n_ros` fields, clone helpers that remap internal neuron/synapse IDs while preserving IO-anchor IDs (plus generated-ID auto-clone parity via `CloneAgentAutoID`) and explicit ID/history remap helpers (`MapIDs`, `MapEvoHistory`) mirroring reference `map_ids/3` + `map_EvoHist/2`, with component-level remap helpers (`CloneNeuronsWithIDMap`, `CloneSynapsesWithIDMap`, `CloneSensorLinksWithIDMap`, `CloneActuatorLinksWithIDMap`) covering simplified `clone_neurons`/`clone_sensors`/`clone_actuators` semantics, genotype-level exact-fingerprint speciation helpers (`SpeciateByFingerprint`/`AssignToFingerprintSpecies`) as the Go analog for `speciate/1` (now also wired as an opt-in monitor speciation mode) plus explicit `Speciate` entrypoint parity including test-agent bypass semantics and population-side-effect species assignment scaffolding via `SpeciateInPopulation`, now keyed by reference-style generalized fingerprint composition (`ComputeReferenceFingerprint`) with per-genome evo-history threaded through `population_monitor` fingerprint-mode assignment (including lineage-captured mutation element IDs, persisted lineage events across storage/continuation boundaries, typed raw+kind-prefixed mutation IDs to better mirror `generalize_EvoHist/2` element semantics, empty-history fallback for standalone helper callsites, and topology-inferred pattern fallback when neuron IDs lack explicit layer tags) and tightened species membership reassignment semantics so repeated speciation of the same genome ID removes stale membership from prior species buckets before insertion, debug print/list-form helpers (`FormatGenome`, `FormatGenomeListForm`, `WriteGenomeListForm`) as Go analogs for `print/1` and `print_ListForm/1` plus store-backed print wrappers (`Print`, `PrintListForm`, `WriteListFormForGenomeID`) with default `<id>.agent` naming parity, verbose substrate metadata output (including CPP/CEP endpoint IDs and substrate parameters), and sensor-input adjacency in neuron list-form lines to mirror reference-style input listing, typed store wrappers for `read`/`dirty_read`/`write`/`dirty_write`/`delete`/`dirty_delete` over genome/population records (now extended with `scape` summary read/write support), explicit fingerprint/topology summary helper aliases (`UpdateFingerprint`, `UpdateNNTopologySummary`) plus reference-style generalized fingerprint-part builders (`BuildReferenceFingerprint`, `ComputeReferenceFingerprint`), explicit topology/evo-history helper parity via `GetNodeSummary` and `GeneralizeEvoHistory` (reference `get_NodeSummary/1` + `generalize_EvoHist/2` intent), utility analogs for `random_element/1` and `calculate_OptimalSubstrateDimension/2`, constructor helper parity for `construct_Neuron/6` plus `create_InputIdPs/3`, `create_NeuralWeightsP/3`, `create_weight/1`, `generate_NeuronAF/1`, and `generate_NeuronPF/1`, and `generate_NeuronAggrF/1`, low-level constructor utility parity for `link_Neuron/4`, `generate_UniqueId/0`, and `generate_ids/2`, and `calculate_ROIds/3`, seed-network scaffolding parity for `construct_SeedNN/6` plus explicit `CreateInitPattern` helper parity (`create_InitPattern/1`) including circuit-tag relay+circuit layering path and actuator vector-length (`vl`) output-neuron multiplicity via `ConstructSeedNNWithActuatorVL`, initial top-level constructor parity via `ConstructCortex`/`ConstructAgent` with morphology-alias resolution and strategy/substrate materialization from constraint-like inputs (including reference-style substrate density vector scaffolding, explicit substrate CPP/CEP endpoint ID scaffolding metadata, persisted CPP/CEP endpoint IDs on substrate genomes, and substrate-mode seed-link relocation so seed links target CPP/CEP endpoints while direct external IO endpoint links remain empty on stored genomes and are preserved in constructed-agent substrate link scaffolds), with clone remap parity extended to substrate endpoint IDs (`cpp_ids`/`cep_ids`) and endpoint-link references during clone ID remapping, and store-backed harness analogs for `create_test/0` and `test/0` via `CreateTest`/`RunTest`; table-granular mnesia records are intentionally represented through the rewrite’s unified genome model. |
| `records.hrl` | `done` | Full record-equivalent surface is materialized across all 31 reference record kinds (via `map2rec`) with explicit per-record defaults/malformed-field fallback tests, versioned record-envelope codecs (`schema_version`/`codec_version`) for every kind, and runtime config consumption of typed strategy-bearing records (`constraint`/`pmp`/`population`/`specie`/`agent`/`trace`); table-granular runtime persistence remains intentionally consolidated in the rewrite’s unified model. |
| `map2rec.erl` | `done` | Reference conversion surface implemented (`constraint`/`pmp`/`sensor`/`actuator`) and extended with broader record-materialization coverage (`experiment`/`circuit`/`layer`/`layer2`/`layer_spec`/`neurode`/`neuron`/`agent`/`cortex`/`substrate`/`polis`/`scape`/`sector`/`avatar`/`object`/`circle`/`square`/`line`/`e`/`a`/`specie`/`population`/`trace`/`stat`/`topology_summary`/`signature`/`champion`) with mapping and fallback tests. |
| `genome_mutator.erl` | `done` | Core topology/weight operators plus plasticity/substrate parameter mutations implemented, with explicit reference-name mutators for `mutate_weights`, `add_bias`/`remove_bias`, `mutate_af`/`mutate_aggrf`, `mutate_pf`, `mutate_plasticity_parameters`, `add_neuron`, and `remove_neuron`, while preserving reference-closer `mutate_weights` behavior via tuning-selection-aware neuron targeting and proportional per-neuron weight perturbation (`1/sqrt(incoming_weights)` with non-empty fallback); directional add/remove link operators (`add_inlink`/`add_outlink`/`remove_inlink`/`remove_outlink`) wired through mutation policy with no non-directional fallback when directional candidates are absent (mutation canceled/retried) and with feedforward layer-order gating enabled in default policies, and `add_inlink` now sourcing from both input-neuron and sensor endpoint pools in the simplified model; explicit splice operators for `outsplice`/`insplice` with directional candidate gating and feedforward edge filtering in feedforward mode and exhaustion cancellation (`ErrNoMutationChoice`) when no directional edge remains or no synapses exist, explicit sensor/actuator add/remove mutation operators (`add_sensor`/`add_sensorlink`/`add_actuator`/`add_actuatorlink`/`remove_sensor`/`remove_actuator`) backed by scape-compatible IO registry filtering and split semantics (`add_sensor` requires available neuron endpoints and establishes an initial endpoint link, `add_actuator` now builds a helper-neuron scaffold with one incoming synapse and uses that helper as the initial actuator endpoint link, `add_*link` adds additional explicit endpoint links, `remove_*` removes selected component with its endpoint links and cancellation on empty/exhausted choices), explicit cutlink alias operators (`cutlink_FromElementToElement`/`cutlink_FromNeuronToNeuron`/`cutlink_FromSensorToNeuron`/`cutlink_FromNeuronToActuator`) and link helper aliases (`link_FromElementToElement`/`link_FromNeuronToNeuron`/`link_FromSensorToNeuron`/`link_FromNeuronToActuator`) mapped in shared config/profile canonical weight-bucket mapping paths, with generic element-link helpers now selecting across synapse/sensor-link/actuator-link candidate pools and canceling when all pools are exhausted, and with explicit neuron-only helper aliases (`link_FromNeuronToNeuron`/`cutlink_FromNeuronToNeuron`) now using candidate-aware applicability and cancellation on exhausted pools; explicit substrate-structure operators for `add_cpp`/`remove_cpp`/`add_cep`/`remove_cep` with cancellation when CPP/CEP registry alternatives are exhausted, with `add_cpp` now also appending one sensor->neuron scaffold link when compatible endpoint candidates exist and `add_cep` appending a helper-neuron synapse scaffold when neurons are present, substrate-dimension circuit mutations for `add_circuit_node`/`delete_circuit_node`/`add_circuit_layer` now canceled when substrate/dimension prerequisites are missing and gated to substrate-configured genomes, explicit search-parameter mutator paths (`mutate_tuning_selection`/`mutate_tuning_annealing`/`mutate_tot_topological_mutations`/`mutate_heredity_type`) backed by genome strategy metadata with expanded reference mode-surface coverage for tuning selection (`dynamic`/`dynamic_random`/`active`/`active_random`/`recent`/`recent_random`/`all`/`all_random`/`current`/`current_random`/`lastgen`/`lastgen_random`) and cancellation when no alternative strategy choice exists, with `Applicable` now reflecting alternative-choice availability when mutator choice sets are singular, and operator-name parity aligned to reference mutation tags for lineage/diagnostics reporting with exhaustive mapping tests for the must-have operator surface; legacy mutation name aliases are canonicalized during ingestion (for example `add_CircuitNode` and `remove_outLink`), duplicate directed-edge creation is now prevented for add-link mutators, directional add/remove link exhausted candidate pools now cancel with `ErrNoMutationChoice`, cutlink IO aliases now cancel with `ErrNoMutationChoice` on empty endpoint-link pools, sensor/actuator link mutators now stop at full connectivity and cancel with `ErrNoMutationChoice` when component pools are exhausted or empty while persisting explicit endpoint link records with synchronized legacy link counters, and function-choice mutators (`mutate_af`/`mutate_aggrf`/`mutate_pf`) plus plasticity/substrate-parameter mutators (`perturb_plasticity_rate`/`change_plasticity_rule`/`perturb_substrate_parameter`) now cancel when prerequisites or alternative choices are unavailable, with function mutator `Applicable` now also reflecting alternative-choice availability; `remove_neuron` now cancels when all neurons are protected/non-removable; `mutate_tot_topological_mutations` now mutates a full mode+parameter pair (`topological_mode` + `topological_param`) instead of mode-only, and `mutate_pf`/`mutate_plasticity_parameters` now target per-neuron plasticity metadata instead of genome-global fields. |
| `selection_algorithm.erl` | `done` | Elite/tournament/species/shared species plus reference HOF strategy surface (`hof_competition`/`hof_rank`/`hof_top3`/`hof_efficiency`/`hof_random`) and aliases (`competition`/`top3`) implemented across CLI/API and map2rec `constraint.population_selection_f` config materialization. |
| `fitness_postprocessor.erl` | `done` | Reference postprocessor surface implemented: `none`, `size_proportional` (with `EFF=0.05` scaling), and `novelty_proportional` placeholder semantics aligned as no-op; `nsize_proportional` alias and map2rec `constraint.population_fitness_postprocessor_f` materialization wired through CLI/API. |
| `specie_identifier.erl` | `done` | Reference `tot_n` specie distinguisher parity implemented, plus topology-based identifier support and adaptive species assignment continuity/threshold diagnostics, now extended with exact fingerprint identifier aliases (`fingerprint`/`exact_fingerprint`) and monitor-level static fingerprint speciation mode wiring. |
| `tot_topological_mutations.erl` | `done` | Constant + count-scaled topological mutation count policies implemented/tested, including stochastic `ncount_exponential` range semantics aligned to reference behavior, with map2rec `constraint.tot_topological_mutations_fs` config materialization support. |
| `tuning_selection.erl` | `done` | Reference mode-name surface implemented (`dynamic`, `dynamic_random`, `active`, `active_random`, `current`, `current_random`, `all`, `all_random`) plus legacy aliases (`recent`, `recent_random`, `lastgen`, `lastgen_random`); random modes use reference-style probabilistic subset selection (`1/sqrt(N)` with non-empty fallback), age modes use generation-aware filtering inferred from genome IDs, `all`/`all_random` now operate over the full candidate pool (not current-only), and `lastgen*` aliases now resolve to current-generation semantics; exoself and `mutate_weights` mirror reference mode-specific empty-pool fallback behavior (`active` no fallback/no-op, `active_random`/`current*`/`dynamic*` fallback to first element), and both exoself perturbation and `mutate_weights` apply age-annealed spread with direct actuator-local perturbation (per-actuator tunables + generation touch) alongside neuron-target perturbation. |
| `tuning_duration.erl` | `done` | Fixed/linear decay/topology-scaled attempt policies implemented and tested, with distinct reference-style `nsize_proportional` and `wsize_proportional` attempt formulas (instead of a shared alias) and `const` alias support. |
| `cortex.erl` | `done` | Per-step orchestrator with sensor->nn->actuator loop implemented, including vector/chunked actuator dispatch semantics; lifecycle/session parity now includes explicit `active`/`inactive`/`terminated` cortex states, reactivation/reset behavior, actuator sync-feedback aggregation (`fitness_acc` vector addition + end-flag accumulation), episode-completion reporting with cycle/time/goal metadata via `RunUntilEvaluationComplete`, and explicit runtime weight backup/restore/perturb APIs (`BackupWeights`/`RestoreWeights`/`PerturbWeights`) with reference-style saturation bounds. |
| `neuron.erl` | `done` | Runtime neuron/synapse evaluation parity implemented with activation + aggregator execution, reference-aligned output saturation (`[-1,1]`), recurrent prior-step signal memory with reset-on-reactivation semantics, per-target-neuron plasticity rule/rate precedence, and explicit runtime weight backup/restore/perturb protocol support via Go-native cortex APIs (`BackupWeights`/`RestoreWeights`/`PerturbWeights`) as the message-protocol analogue. |
| `functions.erl` | `done` | Activation/math utility parity implemented, including full reference activation catalog plus non-activation helper surface: saturation/clamp/scale utilities (`saturation`, `sat`, `sat_dzone`, `scale`), stats helpers (`avg`, `std`), vector ops (`distance`, `vector_difference`, normalization), coordinate conversion helpers (`cartesian`/`polar`/`spherical`, cartesian<->polar/spherical, `to_cartesian`), feature-constructor variants with `IOW` prefixes, and explicit-port demo helper (`s/1` analogue) via `XORDemoStep` with explicit recurrent-state threading. |
| `derivatives.erl` | `done` | Derivative registry and tests implemented. |
| `plasticity.erl` | `done` | Runtime plasticity integration + mutation hooks implemented with Hebbian/Oja updates, saturation bounds, and explicit reference PF coverage (`hebbian`, `hebbian_w`, `oja`/`ojas`, `ojas_w`, `self_modulationV1..V6`, `neuromodulation`); `hebbian_w`/`ojas_w` use per-synapse learning parameters (`synapse.plasticity_params`) with fallback to rate when absent, self-modulation rules apply per-target-neuron override precedence plus generalized Hebbian coefficients (`A/B/C/D`) and neuromodulation dead-zone scaling, and `mutate_plasticity_parameters` now follows reference-closer rule-family choreography (rule-width vector mutation across synapse+bias pools with `1/sqrt(total_parameters)`, V2/V3/V5 coefficient schedules, neuromodulation `[rate,A,B,C,D]` probabilistic updates, signed `hebbian`/`oja` neural-parameter perturbation, and input-before-bias traversal ordering); `mutate_pf` reseeds rule-specific neural defaults and rule-family vector widths, and `none` correctly cancels mutation attempts with genome-level fallback semantics for empty per-neuron rule fields. |
| `signal_aggregator.erl` | `done` | Aggregator support present (`dot_product`, `mult_product`, `diff_product`) with reference-style multiplicative `mult_product` semantics and stateful `diff_product` previous-input differencing parity across cortex steps. |
| `exoself.erl` | `done` | Bounded exoself tuning loop integrated with attempts/policies, minimum-improvement acceptance threshold (`MIN_PIMPROVEMENT`-style gating) using relative dominance semantics (`candidate > incumbent + incumbent * tune_min_improvement`) with monotonic-improvement guards, reference-style consecutive non-improvement attempt budgeting (counter reset on accepted improvement), goal-aware early stop (`fitness_goal`), perturbation controls (`perturbation_range`, `annealing_factor`), vector-helper parity (`transpose`/`vector_avg`/`vector_basic_stats`), per-generation tuning telemetry in diagnostics/artifacts, and explicit `op_mode` handling (`gt`/`validation`/`test`) including composite/list parsing and non-`gt` evaluation-only flow semantics; actor-level orchestration parity is now covered by a runtime exoself path (`TuneRuntimeWithReport`) that executes backup/restore/reactivate/apply sequencing on a persistent cortex session and is wired through monitor workers in `gt` mode with runtime-path regression coverage. |
| `scape.erl` | `partial` | XOR/regression/cart-pole-lite/pole2-balancing/dtm/flatland/gtsa/fx/epitopes/llvm-phase-ordering scapes implemented with morphology/IO/seed/registration wiring, mode-aware evaluation hooks (`gt`/`validation`/`test`) now also accepting `benchmark` windows across the scape family, canonical reference-alias normalization (`*_sim`, `scape_*`) across API/polis/morphology/IO/seed flows, TickAgent sensor/actuator execution paths for `flatland`/`gtsa`/`fx`, a richer flatland metabolics/collision surrogate with respawning entities, deeper GTSA/FX surrogate internals (table-backed GTSA window-state evaluation with per-agent index tracking/rolling windows + directional/MAE diagnostics, optional CSV-backed GTSA table ingestion, and account/order lifecycle simulation plus richer FX step-percept internals/expanded FX sensor surfaces now paired with optional CSV-backed FX price-series ingestion), tighter pole2/dtm runtime telemetry parity (damping-style pole2 step-fitness accumulation + termination reasoning with reference GT `100000` step budgets, optional vector push controls for damping/double-pole flags, and TickAgent pole2 sensing-surface subset support matching parameterized `pb_sim` channels, plus reference-style DTM run-step flow without synthetic per-run timeouts and TickAgent support for `all`/`range_sense`/`reward` sensor-surface subsets), plus XOR scorer parity alignment to reciprocal-SSE fitness semantics (`1/(SSE+1e-6)` with explicit `sse` trace surface), and deeper epitopes/llvm surrogate depth (table-driven epitopes sense/classify index windows with benchmark-range handling plus sequence-derived feature windows now paired with optional CSV-backed epitopes table ingestion, and vector optimization-surface handling with richer runtime traces) now paired with runtime/API/CLI dataset-configuration surfaces (`gtsa`/`fx`/`epitopes` CSV + bounds options and `llvm` workflow JSON options), context-scoped per-run source binding (`scape.WithDataSources`) to avoid cross-run/global-source leakage (including scoped LLVM workflow loading), and LLVM seed-population vector-output scaffolding (`55` output surface); full reference runtime-depth parity for complex environment families is still pending. |
| `flatland.erl` | `partial` | Flatland surrogate now includes metabolics, collision events, respawn timers, and terminal episode causes under the existing scalar IO contract; still not full multi-agent world/server parity. |
| `scape_GTSA.erl` | `partial` | GTSA now uses a table-backed window state machine with reference-style per-agent index/window state (`index_start`/`index_current`/`index_end`, rolling window length/rows) and directional/MAE/jitter diagnostics across `gt`/`validation`/`test`, and can ingest external CSV series into active table bounds (`train_end`/`validation_end`/`test_end`) while preserving deterministic synthetic fallback; full ETS/file workflow parity remains pending. |
| `fx.erl` | `partial` | FX surrogate now includes account/order lifecycle simulation (open/close/flip semantics, realized/unrealized P/L, drawdown/margin-call handling) across `gt`/`validation`/`test`, enriched step-agent percept windows with momentum/volatility/account-internal state channels, optional TickAgent internal-state sensor channels, expanded default morphology/seed sensor scaffolding (`price/signal/momentum/volatility/nav/drawdown/position`), and optional external CSV price-series loading (`LoadFXSeriesCSV`/`ResetFXSeriesSource`) surfaced in runtime traces (`series_name`/`series_points`); full market data/workflow parity remains pending. |
| `morphology.erl` | `partial` | Morphology compatibility + validation implemented for current scapes; full constructor parity pending. |
| `sensor.erl` | `partial` | Registry + scalar families implemented for current scapes; broader sensor family parity pending. |
| `actuator.erl` | `partial` | Registry + scalar output families implemented for current scapes; broader actuator family parity pending. |
| `substrate.erl` | `partial` | Substrate scaffolding/runtime integrated; expanded behavior parity pending. |
| `substrate_cpp.erl` | `partial` | CPP registry/runtime hooks implemented in baseline form. |
| `substrate_cep.erl` | `partial` | CEP registry/runtime hooks implemented in baseline form. |
| `benchmarker.erl` | `partial` | CLI benchmark workflow + run artifacts + parity profile loader implemented, with benchmark summary series stats (`best_mean`/`best_std`/`best_min`/`best_max`) persisted alongside initial/final improvement checks; full report/stat format parity pending. |
| `data_extractor.erl` | `partial` | Added `protogonosctl data-extract` plus reusable extraction helpers (`internal/dataextract`) for GTSA/FX/Epitopes canonical CSV generation (column selection + normalization); broader reference utility workflow breadth remains pending. |
| `epitopes.erl` | `partial` | Epitopes scape now uses deterministic table-driven sense/classify sequencing with reference-style mode windows (`gt`/`benchmark` index surfaces) plus one-hot sequence feature windows and class-balance/margin diagnostics, and supports optional external CSV-backed table loading (`LoadEpitopesTableCSV`/`ResetEpitopesTableSource`) with configurable mode windows; full ETS utility workflow parity remains pending. |
| `dxnn2_app.erl` | `n/a` | OTP app boot parity intentionally replaced by CLI/API runtime model. |
| `visor.erl` | `n/a` | Visualization loop currently out of scope. |

## Completed in latest iterations

- Added configurable LLVM phase-ordering workflow sources via JSON (`LoadLLVMWorkflowJSON` / per-run `WithDataSources` binding), including run-surface API/CLI/config support (`--llvm-workflow-json`, `llvm_workflow_json`, nested `scape_data.llvm.*`) and persisted run-artifact metadata (`llvm_workflow_json_path`).
- Tightened genotype deletion parity so `DeleteAgentFromPopulation` now removes the detached agent genome from storage (not just population membership), with storage-level `DeleteGenome` support in memory/sqlite backends and reconciliation/lifecycle regression coverage.
- Expanded genotype topology-signature parity so `ComputeGenomeSignature` now tracks reference-style encoding type and neuron link summaries (`tot_n_ils`/`tot_n_ols`/`tot_n_ros`) while persisting those fields through lineage summary storage/runtime mapping.
- Expanded genotype clone parity with `CloneAgentWithRemappedIDs`/`CloneGenomeWithRemappedIDs`, which remap internal neuron/synapse/link IDs while allowing explicit preservation of stable IO-anchor neuron IDs.
- Expanded genotype lifecycle parity with explicit delete and clone convenience APIs mirroring reference surface: `DeleteAgent` (unsafe), `DeleteAgentSafe` (membership-pruning safe delete), and generated-ID cloning via `CloneAgentAutoID`.
- Added genotype-level exact fingerprint speciation utilities (`SpeciateByFingerprint` and `AssignToFingerprintSpecies`) to mirror the reference `speciate/1` fingerprint-matching species assignment semantics in Go form.
- Wired exact fingerprint species assignment end-to-end as an opt-in monitor mode (`speciation_mode=fingerprint`) driven by `specie_identifier=fingerprint`, while preserving default adaptive speciation behavior.
- Added genotype debug/introspection helpers mirroring reference `print/1` and `print_ListForm/1` intent via deterministic `FormatGenome`, compact adjacency `FormatGenomeListForm`, and file-emitting `WriteGenomeListForm`.
- Added genotype typed store-operation wrappers (`Read`/`DirtyRead`/`Write`/`DirtyWrite`/`Delete`/`DirtyDelete`) for genome/population records as the Go analog to reference mnesia wrapper helpers.
- Added explicit signature helper aliases `UpdateFingerprint` and `UpdateNNTopologySummary` as Go-level analogs to reference `update_fingerprint/1` and `update_NNTopologySummary/1`.
- Expanded genotype print parity with store-backed wrappers (`Print`, `PrintListForm`, `WriteListFormForGenomeID`) and default `<genome_id>.agent` file naming via `WriteGenomeListFormDefault`.
- Added genotype utility helpers `RandomElement` and `CalculateOptimalSubstrateDimension` as Go analogs of reference `random_element/1` and `calculate_OptimalSubstrateDimension/2`.
- Added genotype constructor helper parity for `construct_Neuron/6` through `ConstructNeuron`, including helper analogs for `generate_NeuronAF/1`, `generate_NeuronPF/1`, `generate_NeuronAggrF/1`, and `calculate_ROIds/3`.
- Added genotype seed-network scaffolding parity for `construct_SeedNN/6` and `create_InitPattern/1` via `ConstructSeedNN`, including deterministic layer-pattern output plus sensor/actuator endpoint-link scaffolding.
- Added initial top-level genotype constructor parity for `construct_Cortex/6` and `construct_Agent/3` through `ConstructCortex`/`ConstructAgent`, including morphology alias resolution (`xor_mimic` and `*_v1` forms), seeded topology assembly, strategy field materialization, and substrate metadata scaffolding for substrate-encoding seeds (now with reference-style density vectors like `[1,1,5,...]` and explicit scaffolded CPP/CEP endpoint ID metadata).
- Added store-backed genotype harness analogs for reference `create_test/0` and `test/0` via `CreateTest` and `RunTest` (construct, optional replacement, clone, and cleanup flow).
- Added explicit `speciate/1` entrypoint parity via `Speciate`, preserving test-agent bypass semantics while reusing exact fingerprint assignment.
- Added low-level constructor utility parity helpers `LinkNeuron`, `GenerateUniqueID`, and `GenerateIDs` as Go analogs for `link_Neuron/4`, `generate_UniqueId/0`, and `generate_ids/2`.
- Expanded seed-network parity in `ConstructSeedNN` with a circuit-tag path that builds relay+circuit two-stage actuator scaffolds and layered init-pattern output.
- Added population-side-effect speciation helper `SpeciateInPopulation` to mirror reference `speciate/1` species reuse/create flows against fingerprint buckets with generated species IDs.
- Added explicit clone remap helpers `MapIDs` and `MapEvoHistory` as Go analogs of reference `map_ids/3` and `map_EvoHist/2`.
- Added explicit constructor-weight helpers `CreateInputIDPs`, `CreateNeuralWeightsP`, and `CreateWeight` as Go analogs of reference `create_InputIdPs/3`, `create_NeuralWeightsP/3`, and `create_weight/1`.
- Expanded typed store wrappers with `scape` table read/write support (`model.ScapeSummary`) while keeping delete semantics explicit for unsupported tables.
- Added explicit clone component remap helpers (`CloneNeuronsWithIDMap`, `CloneSynapsesWithIDMap`, `CloneSensorLinksWithIDMap`, `CloneActuatorLinksWithIDMap`) and routed `CloneGenomeWithRemappedIDs` through them for reference-closer clone helper parity.
- Added explicit topology/evo-history helper analogs `GetNodeSummary` and `GeneralizeEvoHistory` (including generalized layer/type element descriptors) to mirror reference `get_NodeSummary/1` and `generalize_EvoHist/2` intent.
- Added reference-style generalized fingerprint builders `BuildReferenceFingerprint` and `ComputeReferenceFingerprint` to mirror `update_fingerprint/1` composition semantics (pattern + generalized evo history + generalized IO + topology summary).
- Tightened genotype evo-history parity in monitor fingerprint mode by persisting lineage mutation events with concrete changed element IDs and preferring those events when synthesizing generalized fingerprint history (with operation-name fallback when explicit events are unavailable).
- Persisted lineage mutation events through model/storage/API/artifact flows and continuation rehydration so fingerprint-mode evo-history synthesis retains ID-aware event detail across resumed runs.
- Expanded genotype debug print parity so verbose genome dumps now include substrate details (`cpp`/`cep` metadata, endpoint ID sets, and substrate parameter summaries), closer to reference `print/1` surface.
- Tightened fingerprint-history generalization parity by emitting typed mutation element IDs (`neuron:`/`synapse:`/`sensor:`/`actuator:`) alongside raw IDs in lineage events, with kind-prefixed layer parsing support in `GeneralizeEvoHistory`.
- Expanded genotype list-form print parity so neuron adjacency lines include sensor input endpoints (in addition to synapse sources), closer to reference `print_ListForm/1` input-id listing behavior.
- Tightened speciation side-effect parity so fingerprint species helpers now reassign genome IDs uniquely across buckets (stale membership pruned before insert) for closer `speciate/1` membership semantics.
- Tightened reference fingerprint pattern parity with topology-based fallback layer inference when neuron IDs do not encode explicit layer indices, avoiding empty/partial pattern collapse in generalized fingerprints.
- Marked `genotype.erl` parity as `done` under the rewrite’s unified-genome persistence model (with table-granular reference records represented through consolidated structures and typed wrappers).
- Added explicit `CreateInitPattern` helper and wired `ConstructSeedNN` to use it for reference-closer `create_InitPattern/1` parity.
- Added actuator vector-length (`vl`) seed constructor support via `ConstructSeedNNWithActuatorVL` and `ConstructConstraint.ActuatorVectorLengths`, enabling per-actuator output-neuron multiplicity in non-circuit seed scaffolding.
- Species history persisted in store (memory/sqlite), exported in artifacts, queryable via API and CLI (`species` command).
- Adaptive speciation upgraded with representative continuity across generations.
- Tightened genome mutator directional add-link parity by rejecting duplicate directed neuron edges (including directional inlink/outlink candidate exhaustion).
- Tightened genome mutator sensor/actuator link parity by enforcing full-connectivity ceilings for `add_sensorlink`/`add_actuatorlink` applicability and mutation cancellation.
- Tightened genome mutator IO endpoint-link parity by storing explicit sensor->neuron and neuron->actuator links for `add_*link`/`cutlink_*`/`remove_*`, while keeping legacy link counters synchronized.
- Tightened genome mutator add-IO parity by having `add_sensor` and `add_actuator` immediately establish one initial endpoint link, matching reference-style add-and-connect semantics.
- Tightened `mutate_weights` parity by targeting synapse perturbations through strategy tuning-selection neuron subsets with per-neuron proportional/fallback mutation behavior.
- Expanded `mutate_tuning_selection` mutation mode coverage to the full reference-style tuning selection surface and legacy aliases.
- Tightened substrate mutation cancellation semantics so `add_cpp` and `add_cep` are only applicable when alternative registry choices exist and return a cancellation error when exhausted.
- Tightened `add_sensor` and `add_actuator` parity semantics to require available neuron endpoints for add-and-connect behavior (inapplicable/error when none exist).
- Tightened search-parameter mutator parity by canceling `mutate_tuning_selection`/`mutate_tuning_annealing`/`mutate_tot_topological_mutations`/`mutate_heredity_type` when no alternative choice exists.
- Tightened IO component mutation cancellation semantics so `add_sensor`/`add_actuator` and `remove_sensor`/`remove_actuator` return cancellation errors on exhausted or empty choice sets instead of no-op success.
- Tightened function mutator cancellation semantics so `mutate_af`, `mutate_aggrf`, and `mutate_pf` cancel when no alternative function choice exists.
- Tightened substrate/circuit mutator cancellation semantics so `add_cpp`/`add_cep`/`remove_cpp`/`remove_cep` and `add_circuit_node`/`delete_circuit_node`/`add_circuit_layer` cancel when substrate prerequisites are missing or exhausted.
- Tightened plasticity/substrate-parameter mutator cancellation semantics so `perturb_plasticity_rate`, `change_plasticity_rule`, and `perturb_substrate_parameter` cancel when required config or alternative choices are unavailable.
- Tightened `remove_neuron` cancellation semantics so mutation is canceled when all neurons are protected (no removable candidates).
- Tightened search mutator applicability semantics so `Applicable` reflects alternative-choice availability for constrained mutator choice sets.
- Tightened function mutator applicability semantics so `mutate_af`/`mutate_aggrf`/`mutate_pf` are inapplicable when configured choices provide no alternative.
- Tightened genome mutator search-parameter parity for `mutate_tot_topological_mutations` by mutating topological function mode and parameter together (`topological_mode` + `topological_param`).
- Tightened genome mutator plasticity parity by mutating `mutate_pf` and `mutate_plasticity_parameters` on per-neuron plasticity metadata rather than genome-global plasticity state.
- Tightened directional/add-link cancellation semantics so exhausted `add_inlink`/`add_outlink`/`add_sensorlink`/`add_actuatorlink` pools now return `ErrNoMutationChoice`.
- Tightened directional remove-link cancellation semantics so exhausted `remove_inlink`/`remove_outlink` pools now return `ErrNoMutationChoice`.
- Tightened IO cutlink cancellation semantics so `cutlink_FromSensorToNeuron` and `cutlink_FromNeuronToActuator` return `ErrNoMutationChoice` when no endpoint links exist.
- Tightened splice cancellation semantics so exhausted directional `outsplice`/`insplice` pools return `ErrNoMutationChoice`.
- Tightened splice cancellation semantics so `outsplice`/`insplice` return `ErrNoMutationChoice` for directional exhaustion and no-synapse cases.
- Tightened IO link-add cancellation semantics so `add_sensorlink`/`add_actuatorlink` return `ErrNoMutationChoice` when required component pools are empty.
- Tightened structural add-actuator/add-cep parity so `add_actuator` builds a helper-neuron scaffold (`source -> helper -> actuator`) and `add_cep` appends a helper-neuron synapse scaffold when neurons are present.
- Tightened `add_inlink` source-pool parity by allowing sensor->neuron endpoint-link candidates in addition to input-neuron synapse candidates.
- Tightened `add_cpp` structural parity by appending one sensor->neuron scaffold link when compatible endpoint candidates exist.
- Tightened generic element-link helper parity so `link_FromElementToElement` and `cutlink_FromElementToElement` now operate across synapse and endpoint-link pools with cancellation on full exhaustion.
- Tightened neuron-only link helper parity so `link_FromNeuronToNeuron` and `cutlink_FromNeuronToNeuron` now use candidate-aware applicability and cancellation on exhausted pools.
- Mutation operator gating by genome/scape compatibility added.
- New parity scapes added: `pole2-balancing`, `dtm`, `epitopes`, and `llvm-phase-ordering` with morphology/IO/seed/registration wiring.
- Parity profile loader added for `.ref` benchmark profiles (`--profile`).
- Reference strategy aliases added: `hof_competition`, `dynamic_random`.
- `done_check` tightened to require `species_history.json` and speciation diagnostics fields.
- Added `species-diff` API/CLI command for generation-level species dynamics diffs.
- Centralized typed run-config materialization with stricter validation in API.
- Implemented true `dynamic_random` exoself candidate-selection semantics.
- Added baseline `map2rec` package for permissive `constraint`/`pmp` record materialization.
- Expanded `map2rec` parity with permissive `sensor`/`actuator` record materialization and tests.
- Added permissive `map2rec` materialization for `neuron` and `agent` records with defaults + malformed-field fallback tests.
- Added permissive `map2rec` materialization for `cortex`, `specie`, and `population` records with mapping tests.
- Added permissive `map2rec` materialization for `trace`, `stat`, `topology_summary`, `signature`, and `champion` records with mapping tests.
- Wired `map2rec` into parity profile ingestion so profile-to-runtime mapping uses record materialization semantics.
- Added `benchmark --config <json>` map2rec-backed config ingestion path with explicit-flag override behavior.
- Added `run --config <json>` map2rec-backed config ingestion path with the same explicit-flag override behavior.
- Added sqlite integration tests for `run --config` and `benchmark --config` map2rec ingestion and flag overrides.
- Added `profile show` (text + JSON) to inspect resolved map2rec-backed parity profile materialization.
- Added reference selection aliases `competition` and `top3` across CLI/API selection resolution.
- Added reference fitness-postprocessor alias `nsize_proportional` across CLI/API resolution.
- Added reference tuning-duration aliases (`const`, `nsize_proportional`, `wsize_proportional`) across CLI/API/config materialization.
- Added reference tuning-selection mode set (`all`, `all_random`, `recent`, `recent_random`, `lastgen`, `lastgen_random`) across tuning/API/CLI/config normalization.
- Added map2rec materialization for `constraint.tot_topological_mutations_fs` into `RunRequest` with run-config override integration coverage.
- Added map2rec materialization for `constraint.population_fitness_postprocessor_f` into `RunRequest` with run-config override integration coverage.
- Preserved `constraint.population_selection_f` aliases (`competition`, `top3`) during map2rec config materialization instead of collapsing to one default.
- Added selection-strategy parity aliases `hof_rank`, `hof_efficiency`, and `hof_random` with CLI/API resolution and selector tests.
- Aligned `size_proportional` fitness postprocessing with reference efficiency scaling exponent (`EFF=0.05`) and added dedicated postprocessor tests.
- Added dedicated bias mutation operator (`perturb_random_bias`) and mapped reference `add_bias` config/profile operators to a distinct bias-mutation weight path.
- Added dedicated activation/aggregator mutation operators (`change_random_activation`, `change_random_aggregator`) and mapped reference `mutate_af`/`mutate_aggrf` config/profile operators to distinct mutation-weight paths.
- Added dedicated bias-removal mutation operator (`remove_random_bias`) and mapped reference `remove_bias` config/profile operators to a distinct remove-bias mutation-weight path.
- Added dedicated plasticity-function mutation operator (`change_plasticity_rule`) and mapped reference `mutate_pf` config/profile operators to a distinct plasticity-rule mutation-weight path.
- Hardened `polis` lifecycle semantics with idempotent init, explicit stop/reset of in-memory runtime registration, and direct registered-scape lookup coverage.
- Extended `polis` lifecycle parity with configured support-module startup/shutdown and configured public-scape autostart/summary tracking (including metadata fields and managed start/stop hooks with rollback on init failure).
- Added `polis` `create`/`reset` lifecycle API parity analogs in platform/storage, including reset-driven schema/data clearing and lifecycle restart behavior (memory/sqlite covered).
- Added CLI lifecycle parity wiring for `polis` reset semantics via `protogonosctl reset --store ... --db-path ...`, with sqlite integration coverage for schema/data clearing.
- Added explicit `polis` stop-reason parity analogs (`normal`/`shutdown`) with `StopWithReason`/`Shutdown` APIs, reason-aware module/scape stop hooks, and tracked `LastStopReason` lifecycle state (including shutdown teardown semantics in reset and API client close).
- Added `polis` default-runtime registry parity analogs with package-level singleton lifecycle helpers (`StartDefault`/`Default`/`StopDefault`) to mirror reference `whereis(polis)` startup/stop discovery semantics.
- Added public-scape type lookup parity analog for `polis:get_scape` semantics via `GetScapeByType`, including deterministic first-configured type resolution when multiple public scapes share the same type.
- Added online runtime lifecycle management for configured polis resources: dynamic support-module add/remove (`AddSupportModule`/`RemoveSupportModule`) and dynamic public-scape add/remove (`AddPublicScape`/`RemovePublicScape`) with reason-aware stop propagation and type-lookup remapping on removal.
- Added summary-aware managed public-scape startup hooks (`StartWithSummary`) so configured startup metadata (`type`/`parameters`/`metabolics`/`physics`, with default type fallback) is delivered at scape startup time, aligning closer to reference `start_link` initialization arguments.
- Tightened `polis` public-scape type lookup parity so `GetScapeByType` preserves insertion-order resolution across dynamic add/remove operations (reference-style first-match list semantics) instead of lexical fallback.
- Added a reusable platform supervision abstraction (`Supervisor`) using goroutines/channels with restart/backoff policy and integrated it into polis lifecycle for optional support-module/public-scape `Supervise(ctx)` loops, including task introspection (`ActiveSupervisedTasks`) and shutdown/removal teardown wiring.
- Added explicit polis message-protocol analogs (`Call`/`Cast`) to cover reference `handle_call`/`handle_cast` surface for `get_scape` and stop/init lifecycle messages with typed request/result structs.
- Upgraded polis protocol handling from direct method dispatch to a dedicated channel-backed mailbox loop so `Call`/`Cast` messages execute through actor-like serialized processing with mailbox lifecycle tied to init/stop transitions.
- Added explicit init-state payload parity for `init/2` semantics via `InitCast{State: ...}` and `InitWithState`, allowing runtime state replacement through cast-driven initialization.
- Added `sync/0` parity analogs via `Polis.Sync` and `SyncDefault`, including sync hooks for runtime components that expose `Sync(ctx)`.
- Extended supervision parity with restart/permanent-failure hooks, persisted failure history (`SupervisionFailures`), and configurable shutdown escalation on restart exhaustion (`EscalateOnSupervisorFailure` + `SupervisorFailureReason`).
- Added supervision strategy surface with `one_for_one` and `one_for_all`; `one_for_all` now restarts sibling supervised tasks on recoverable child failures (policy-aware for `permanent`/`transient`/`temporary`) and still cancels siblings when a child reaches permanent failure (restart exhaustion), with polis-level integration tests.
- Added supervised child-spec/status parity surface (`SupervisorChildSpec`, `SupervisorChildStatus`, `ActiveSupervisedChildren`) so supervised runtime children expose group/restart policy/restart counters and last-error telemetry through polis APIs.
- Expanded supervised child restart-policy parity with `permanent`/`transient`/`temporary` semantics (including permanent restart-on-normal-exit behavior), with per-module/public-scape policy wiring via `AddSupportModuleWithPolicy` and `PublicScapeSpec.RestartPolicy`.
- Added population-monitor lifecycle stop controls (`fitness_goal`, `evaluations_limit`) with early-termination coverage and fixed persisted generation to reflect executed generations under early stop.
- Added population-monitor evolution-type parity surface by wiring `generational` and `steady_state` modes through map2rec/config/API/runtime (`constraint.population_evo_alg_f` and `pmp.evolution_type`), with dedicated steady-state runtime behavior and tests.
- Added `survival_percentage` parity semantics in `PopulationMonitor` to derive elite retention count when `elite_count` is unset, with validation and lineage-backed behavioral tests.
- Added map2rec/CLI/API parity wiring for lifecycle controls (`survival_percentage`, `fitness_goal`, `evaluations_limit`) through `run --config` and persisted run artifacts, with sqlite integration and API validation coverage.
- Added map2rec/CLI/API parity wiring for `specie_size_limit` with monitor-level per-species parent-pool capping semantics and dedicated unit/integration validation coverage.
- Added population-monitor control-channel semantics (`pause`, `continue`, `stop`) with generation-boundary synchronization tests to mirror reference op-tag control flow.
- Exposed monitor pause-control flow through platform/API/CLI via `start_paused`/`auto_continue_ms` (`--start-paused`, `--auto-continue-ms`) with config-materialization and integration coverage.
- Added live run control registry in `polis` keyed by `run_id` and exposed API-level `PauseRun`/`ContinueRun`/`StopRun` controls with controlled-run integration tests.
- Added population continuation flow (`continue/1` parity path) by loading persisted population snapshots via `continue_population_id`/`--continue-pop-id` and resuming evolution from stored genomes.
- Added fail-fast IO compatibility validation for continued populations against the target scape (`EnsurePopulationIOCompatibility`) to prevent deferred worker-time mismatches.
- Added generation-offset continuation semantics so resumed runs continue absolute generation numbering and persisted population generations from snapshot state.
- Added `initial_generation` artifact/config persistence for continued runs to make generation-offset provenance explicit in exported run metadata.
- Aligned continuation identity semantics closer to reference `continue/1`: when `continue_population_id` is set and `run_id` is omitted, the continued run reuses the population ID as run identity.
- Added append-on-continue persistence semantics: when a continuation reuses an existing run identity, prior fitness/diagnostics/species/lineage/top-genome history is merged and extended instead of being replaced.
- Added CLI live-control command surface `monitor pause|continue|stop --run-id ...` mapped to platform/API run-control registry semantics.
- Added map2rec `pmp.population_id` continuation-default materialization so config-driven runs can map directly into continued population/run identity when explicit IDs are omitted.
- Added population-monitor lifecycle trace parity hooks: `goal_reached` and `print_trace` control commands plus step-sized (`trace_step_size`, default `500`) and completion trace callbacks via `TraceUpdateHook`, covering committee/benchmarker-style periodic trace-update signals.
- Exposed population-monitor trace/lifecycle controls across platform/API/CLI (`GoalReachedRun`/`PrintTraceRun`, `monitor goal-reached|print-trace`) and wired trace-step config materialization (`--trace-step-size`, config `trace_step_size` and `trace.step_size`) into monitor runtime and run artifacts.
- Tightened `steady_state` evolution semantics toward reference behavior by replacing one agent per cycle (rather than replacing the full population each cycle), with focused lineage-shape regression coverage.
- Added step-window monitor trace accumulation to mirror `gather_STATS`-style lifecycle reporting in callbacks: per-step evaluation count, cycle/time accumulators (trace-derived), and per-species evaluation counters surfaced in `TraceUpdate`.
- Added optional per-species champion validation/test probe reporting in monitor trace callbacks (`TraceUpdate.species[*].validation_fitness`/`test_fitness` + `champion_genome_id`) with run-surface toggles (`validation_probe`, `test_probe`, `--validation-probe`, `--test-probe`).
- Added reference-closer `goal_reached` accounting semantics by suppressing evaluation counting after goal signal processing (including pre-signaled runs), while draining queued control commands during active evaluation to avoid dropped lifecycle controls.
- Tightened in-flight lifecycle control parity by handling monitor commands (`print_trace`, `goal_reached`, pause/continue/stop state changes) while evaluation workers are still running, instead of only at pre/post-generation drain points.
- Expanded per-species trace-stat parity toward `gather_STATS` semantics by surfacing `std_fitness`, `min_fitness`, `avg_neurons`, `std_neurons`, and topology diversity alongside existing best/mean/evaluation/champion probe metrics.
- Aligned validation-probe semantics closer to reference `validation_testing/2` flow by emitting test-fitness probe metrics whenever validation probing is enabled for species champions.
- Added explicit population lifecycle deletion path (`population delete --id ...`) mapped to genotype/store snapshot deletion for `delete_population` parity coverage.
- Added dedicated `hof_top3` selection parity path and wired it across evo selector resolution, API/CLI strategy parsing, and alias-acceptance tests.
- Aligned `novelty_proportional` with reference placeholder behavior as no-op while preserving clone isolation and postprocessor alias wiring (`nsize_proportional`).
- Added `tot_n` specie identifier parity and wired specie-identifier selection (`topology|tot_n`) through config/API/runtime and run artifacts.
- Expanded cortex actuator dispatch parity to support single-actuator vector writes and even chunking across multiple actuators.
- Aligned neuron forward-path output clipping with reference neuron saturation semantics (`OUTPUT_SAT_LIMIT=1`).
- Expanded NN activation registry toward reference `functions.erl` with additional built-ins and behavior tests (sin/cos/gaussian/sqrt/log/threshold-style activations).
- Expanded derivative parity toward reference `derivatives.erl` (including `linear`, `sigmoid1`, `multiquadric`, `sqrt`, `log`, and clipping parity in `sigmoid`/`gaussian` derivatives).
- Added plasticity rule-name alias parity so reference-style PF names (`hebbian_w`, `ojas`, `ojas_w`) map onto runtime Hebbian/Oja updates.
- Aligned `mult_product` aggregator semantics with reference multiplicative bias behavior and added focused NN parity coverage.
- Added exoself minimum-improvement gating (`tune_min_improvement`) across tuner runtime, CLI/config/API wiring, and validation coverage.
- Added tuning-selection alias parity for reference mode names (`dynamic`, `active`, `active_random`, `current`, `current_random`) with CLI/API/config normalization and runtime support.
- Aligned tuning `*_random` selection behavior with reference probabilistic subset semantics (`1/sqrt(N)` + non-empty fallback) over the available candidate base pool.
- Added goal-aware exoself short-circuit semantics so tuning attempts stop early when best fitness already reaches the configured run goal.
- Added exoself perturbation controls (`tune_perturbation_range`, `tune_annealing_factor`) across runtime, CLI/config/API validation, and persisted run config artifacts.
- Added generation-aware candidate-pool filtering for `dynamic`/`active`/`current` tuning-selection families by inferring generation from genome IDs.
- Corrected `all`/`all_random` tuning-selection semantics to use the full candidate pool instead of current-generation-only filtering.
- Aligned `mutate_weights` tuning-selection semantics with age-filtered mode pools and age-annealed per-neuron spread (`max_delta * annealing^age`) using neuron generation metadata with ID fallback.
- Aligned exoself perturbation with tuning-selection mode-specific neuron pools and age-annealed per-neuron spread (`perturbation_range * pi * annealing^age`) with generation metadata/ID fallback.
- Added actuator-generation metadata tracking and actuator-aware tuning target projection (actuator candidates map to linked neurons) across exoself and `mutate_weights`.
- Aligned exoself empty-pool fallback semantics by mode to match reference behavior (`active` can return empty; `active_random`/`current*`/`dynamic*` fallback to first candidate with max spread).
- Added per-generation tuning telemetry (`invocations`, attempts, candidate evaluations, accepted/rejected counts, goal hits) to diagnostics and persisted artifacts via optional reporting tuner support.
- Exposed tuning telemetry fields in `protogonosctl diagnostics` output for direct CLI parity introspection.
- Added derived tuning efficiency ratios in `protogonosctl diagnostics` (`tuning_accept_rate`, `tuning_evals_per_attempt`) to aid parity comparisons against reference runs.
- Promoted tuning efficiency ratios to first-class diagnostics fields persisted through store/API/export (`generation_diagnostics.json`), with CLI consuming stored values directly.
- Extended `species-diff` output to include tuning telemetry deltas between compared generations for combined speciation+tuning analysis.
- Added `species-diff --show-diagnostics` to print full from/to diagnostics snapshots (including tuning telemetry and ratios) alongside deltas.
- Added `species-diff --json` for machine-readable diff output suitable for scripting/CI parity checks.
- Added `diagnostics --json` for machine-readable per-generation diagnostics (including tuning telemetry and ratios) in scripts/CI.
- Added `runs --json` for machine-readable run index/listing output, keeping analysis/reporting commands automation-friendly.
- Added `lineage --json` and `top --json` for machine-readable lineage/top-genome analysis outputs.
- Added `fitness --json` and `species --json` for machine-readable history output parity across reporting commands.
- Aligned default `mutate_weights` path closer to reference by perturbing a proportional subset of weights (`1/sqrt(total_weights)`) with guaranteed non-empty mutation fallback.
- Added directional add-link mutation paths (`add_inlink`/`add_outlink`) via dedicated operators (`add_random_inlink`/`add_random_outlink`) in default mutation policy.
- Added directional remove-link mutation paths (`remove_inlink`/`remove_outlink`) via dedicated operators (`remove_random_inlink`/`remove_random_outlink`) in default mutation policy.
- Added explicit sensor/actuator mutation paths (`add_sensor`/`add_sensorlink`/`add_actuator`/`add_actuatorlink`) via dedicated scape-compatible IO operators.
- Added explicit substrate-structure mutation paths (`add_cpp`/`add_cep`) via dedicated operators (`add_random_cpp`/`add_random_cep`) in default mutation policy.
- Added substrate-dimension circuit mutation paths for `add_circuit_node`/`add_circuit_layer` via dedicated operators in default mutation policy.
- Added explicit splice mutation paths (`outsplice`/`insplice`) via dedicated operators (`add_random_outsplice`/`add_random_insplice`) in the add-neuron policy bucket.
- Aligned mutation operator names with reference tags (for example: `add_inlink`, `outsplice`, `add_cpp`, `add_circuit_node`) to improve lineage parity.
- Added explicit sensor/actuator removal mutation paths (`remove_sensor`/`remove_actuator`) and mapped sensor/actuator cutlink-style names into substrate mutation weighting.
- Canonicalized legacy circuit mutation aliases (`add_CircuitNode`/`delete_CircuitNode`/`add_CircuitLayer`) during config/profile ingestion while preserving compatibility.
- Added direct actuator-local tuning perturbation support so exoself and `mutate_weights` mutate per-actuator tunables, with cortex applying actuator-local offsets during actuator dispatch.
- Aligned `mutate_weights` empty-pool behavior to reference mode-specific tuning-selection fallbacks (`active` no fallback; `active_random`/`current*`/`dynamic*` fallback to first element).
- Aligned active-mode empty-pool semantics to reference no-op behavior in both exoself perturbation and `mutate_weights` (no random fallback mutation when no eligible targets exist).
- Completed cortex lifecycle/synchronization parity with explicit active/inactive/terminated state handling, reactivation reset semantics, actuator sync-feedback accumulation, and episode-level completion reporting.
- Added per-neuron plasticity precedence in runtime updates so incoming synapses use post-neuron plasticity rule/rate overrides before genome-level defaults.
- Added recurrent synapse step-memory parity in forward runtime so recurrent edges consume previous-step outputs (with reset on fresh forward state/reactivation).
- Added explicit runtime weight protocol APIs (`BackupWeights`/`RestoreWeights`/`PerturbWeights`) with reference-style saturation limits to mirror neuron backup/restore/perturb semantics in Go form.
- Marked `neuron.erl` parity complete after adding recurrent step-memory, per-neuron plasticity precedence, and Go-native weight protocol analogs.
- Expanded `plasticity.erl` parity with `self_modulationV1..V6` and `neuromodulation` rule-name support plus generalized Hebbian (`A/B/C/D`) runtime coefficients and neuromodulation dead-zone scaling.
- Extended `mutate_plasticity_parameters` parity so self-modulation rules perturb per-neuron generalized Hebbian coefficients (`A/B/C/D`) instead of rate-only updates.
- Expanded default plasticity-rule mutation pools so `change_plasticity_rule`/`mutate_pf` can sample `self_modulationV1..V6` and `neuromodulation` without custom rule lists.
- Added runtime support for self-modulation dynamic terms sourced from per-synapse parameter vectors (`synapse.plasticity_params`), including `H` derivation for V1-V3, dynamic `A` for V4-V5, and dynamic `A/B/C/D` for V6.
- Updated `mutate_plasticity_parameters` to mutate self-modulation synapse parameter vectors (rule-width aware) with fallback to neuron-level coefficient mutation when no incoming synapse candidate exists.
- Added self-modulation bias-channel runtime support via per-neuron `plasticity_bias_params`, so dynamic `H`/`A`/`B`/`C`/`D` terms incorporate bias contributions when present.
- Expanded self-modulation mutation choreography so `mutate_plasticity_parameters` mutates from both synapse and bias parameter-vector pools, with rule-aware coefficient mutation retained for V2/V3/V5.
- Aligned V2/V3/V5 choreography further by co-mutating a neural coefficient and a vector parameter in a single `mutate_plasticity_parameters` step.
- Aligned self-modulation mutation density to reference-closer probabilistic schedules (`1/sqrt(total_parameters)` for vector pools; `V2=0.5` and `V3/V5=1/sqrt(N)` for neural-parameter perturbation).
- Added explicit `hebbian_w`/`ojas_w` runtime semantics using per-synapse learning parameters and aligned default plasticity mutation rule pools/mutator paths to include these weight-parameter variants.
- Aligned self-modulation vector traversal ordering in mutators to reference-style sequencing (incoming synapse vectors first, bias vector last).
- Corrected `mutate_plasticity_parameters` none-rule behavior to cancel (`ErrNoMutationChoice`) and fixed empty per-neuron plasticity-rule fallback to genome-level defaults.
- Added reference-closer neuromodulation mutation scheduling so `mutate_plasticity_parameters` perturbs `[rate,A,B,C,D]` with probabilistic density `1/sqrt(5)` instead of single-coefficient deltas.
- Added rule-transition vector reinitialization in `mutate_pf` so plasticity-weight parameter vectors are reseeded/cleared to match target PF families.
- Added signed single-parameter mutation semantics for `hebbian`/`oja` in `mutate_plasticity_parameters`, matching reference-style neural-parameter perturbation instead of nonnegative-only rate adjustments.
- Marked `plasticity.erl` parity complete after aligning rule-surface runtime behavior and rule-family mutation choreography (`mutate_plasticity_parameters` + `mutate_pf`) to reference semantics.
- Marked `functions.erl` parity complete after adding non-activation utility helpers (saturation/scale/stats/vector/coordinate/IOW) and the explicit-state `XORDemoStep` reference analogue.
- Aligned exoself acceptance gating to reference-style relative `MIN_PIMPROVEMENT` dominance semantics (scalar comparator now uses `candidate > incumbent + incumbent * mip`) and added vector/scalar dominance tests for parity coverage.
- Aligned exoself attempt-budget semantics to reference behavior by counting consecutive non-improvements (reset on accepted improvement) instead of fixed total attempts, with regression coverage for both no-improvement stop and improvement-reset continuation paths.
- Added exoself vector-helper parity utilities (`transpose`/`vector_avg`/`vector_basic_stats`) with regression coverage for column-wise averaging/std behavior and lexicographic max/min semantics.
- Added exoself-aligned operation mode routing for `validation`/`test` semantics by supporting monitor/API/config `op_mode` with single-generation evaluation and tuning/evolution bypass outside `gt`.
- Exposed `op_mode` selection in CLI (`run`/`benchmark` via `--op-mode`) and config-override plumbing so non-`gt` validation/test flows are accessible without manual JSON edits.
- Added composite/list `op_mode` parity by accepting forms like `[gt,validation,test]` (and comma/pipe/plus variants) during API/CLI/config materialization, normalizing to `gt` with implied `validation_probe`/`test_probe` toggles and rejecting non-`gt` composites.
- Tightened non-`gt` execution semantics by bypassing fitness postprocessing and allowing mutation-less monitor initialization for `validation`/`test` runs, matching reference-style evaluation-only behavior.
- Forced non-`gt` runs to disable tuning and compare-tuning at request materialization time so validation/test artifacts and run index correctly reflect evaluation-only exoself semantics.
- Added mode-aware scape routing so monitor evaluations and champion probes dispatch explicit `gt`/`validation`/`test` modes when a scape exposes mode-specific evaluation hooks.
- Added canonical scape-name alias normalization (`xor_sim`, `pb_sim`, `dtm_sim`, `fx_sim`, `scape_GTSA`, `scape_LLVMPhaseOrdering`) through runtime lookup surfaces (`polis` registration/lookup/removal, API request materialization/summary lookup, morphology and IO compatibility checks, and seed population construction).
- Added TickAgent sensor/actuator scape-loop parity paths for `flatland`, `gtsa`, and `fx`, with cortex-backed IO regression tests to complement existing step-runner paths.
- Added explicit mode-window routing for `dtm` and `pole2-balancing` (`gt`/`validation`/`test`) with mode-specific run/step/init settings and trace annotations, aligning those scapes with monitor probe routing semantics.
- Deepened `flatland` behavior parity with a richer world surrogate: respawning food/poison entities, per-step metabolics, collision-driven rewards/penalties, terminal-cause tracking, and expanded trace telemetry.
- Added explicit mode-window routing for `xor`, `regression-mimic`, `cart-pole-lite`, and `flatland` (`gt`/`validation`/`test`) with per-mode evaluation windows and trace markers so probe/validation execution semantics are consistent across the core scalar scape set.
- Deepened `scape_GTSA` surrogate behavior with rolling warmup+prediction windows, regime-shifted synthetic series, and expanded diagnostics (`mae`, directional accuracy, prediction jitter) across modes.
- Deepened `fx` surrogate behavior with explicit account/order lifecycle simulation (entry spread, units sizing, close/flip transitions, realized/unrealized P/L, drawdown and margin-call tracking) and corresponding trace coverage.
- Deepened `scape.erl` direct-family runtime diagnostics by aligning pole2 step-fitness/termination accounting (`with_damping`-style accumulator, goal/limit reasons) and expanding DTM run telemetry (terminal side/reward tallies, reference-style non-timeout run flow, and per-run step-index diagnostics).
- Aligned pole2 GT episode budget semantics with reference `scape.erl` defaults by setting `goal_steps`/`max_steps` to `100000`, with regression coverage on emitted trace budgets.
- Expanded pole2 push semantics toward reference parity by accepting optional vectorized control outputs (`force`, damping flag, double-pole flag), with trace diagnostics for vector-control and single-pole/damping-off step accounting.
- Expanded DTM TickAgent IO parity by accepting reference-style sensor subset surfaces (`all`, `range_sense`, `reward`) instead of requiring the full four-channel sensor set, with regression coverage for range-only and reward-only cortex wiring.
- Expanded pole2 TickAgent IO parity by accepting parameterized sensing-surface subsets (`cpos`, `cvel`, `pangle1`, `pvel1`, `pangle2`, `pvel2`, `2`, `3`, `4`, `6`) in addition to full six-channel mode, with regression coverage for reduced (`3`) and full (`6`) sensor surfaces.
- Aligned XOR scorer semantics with reference `scape.erl` by using reciprocal-SSE fitness (`1/(SSE+1e-6)`) and exposing explicit `sse` trace diagnostics alongside `mse`.
- Shifted GTSA evaluation to a table-backed window state machine with per-agent index progression (`index_start`/`index_current`/`index_end`) and rolling-window metadata in traces (`table_name`, `window_rows`, `window_length`), moving closer to reference `scape_GTSA` table semantics.
- Added optional GTSA CSV table ingestion (`LoadGTSATableCSV`) with configurable training/validation/test cutoffs and safe fallback to the deterministic default table (`ResetGTSATableSource`) when ingestion is not configured.
- Added optional FX CSV price-series ingestion (`LoadFXSeriesCSV`) with deterministic synthetic fallback (`ResetFXSeriesSource`) so FX evaluations can run against external market series while preserving existing account/order simulation semantics.
- Added optional epitopes CSV table ingestion (`LoadEpitopesTableCSV`) with configurable `gt`/`validation`/`test`/`benchmark` windows and deterministic fallback (`ResetEpitopesTableSource`) while preserving table-driven sense/classify session semantics.
- Exposed scape dataset-source configuration through run surfaces (API `RunRequest`, CLI flags, config-file fields, and artifact persistence) so GTSA/FX/Epitopes CSV sources and bounds can be set per run invocation.
- Added context-scoped dataset binding (`scape.WithDataSources`) and routed API runs through context overrides so GTSA/FX/Epitopes source selection is run-scoped instead of relying on global mutable source state.
- Added a baseline `data_extractor` workflow via `protogonosctl data-extract` and `internal/dataextract` helpers, enabling canonical GTSA/FX/Epitopes CSV emission from raw CSV sources.
- Shifted epitopes evaluation from pure surrogate sampling to a table-driven sense/classify session with explicit index-window state (`start_index`/`end_index`/`index_current`), benchmark-window routing, and binary classification rewards aligned to reference classify-step semantics.
- Deepened `epitopes` and `scape_LLVMPhaseOrdering` surrogate behavior with sequence-derived epitopes feature windows (including one-hot extension + class diagnostics) and LLVM vector optimization-surface handling (`done` + reference pass list) with expanded runtime/selection telemetry.
- Added cross-scape `benchmark` mode alias support (`gt`/`validation`/`test`/`benchmark`) across all mode-aware scapes, with regression coverage that enforces trace-mode materialization consistency.
- Expanded LLVM seed-population parity so `ConstructSeedPopulation(\"llvm-phase-ordering\")` now provisions a 55-output actuator surface (`o00..o54`) and corresponding vector-output cortex evaluation coverage in scape tests.
- Expanded FX scape percept depth on step-runner paths with richer market/account internal features (momentum, volatility, NAV/drawdown/unrealized channels, position/exposure context) while preserving TickAgent compatibility on legacy price/signal sensors.
- Expanded FX IO/morphology seed parity by adding optional internal-state TickAgent sensor channels (`fx_momentum`, `fx_volatility`, `fx_nav`, `fx_drawdown`, `fx_position`) and wiring those channels into default FX morphology and seed-population construction.
- Completed actor-level exoself orchestration parity by adding runtime tuner interfaces (`RuntimeAgent`, `RuntimeEvaluateFn`) and `TuneRuntimeWithReport`, then wiring monitor workers to execute runtime backup/restore/reactivate tuning loops on persistent cortex instances in `gt` mode.
- Expanded `map2rec` record-materialization coverage with `experiment` conversion (including defaults and malformed-field fallback tests) to track additional `records.hrl` surface.
- Expanded `map2rec` record-materialization coverage with `circuit` conversion (including defaulted dynamics/noise/lp/memory/backprop fields and malformed-field fallback tests) to track additional `records.hrl` surface.
- Expanded `map2rec` record-materialization coverage with `layer` conversion (including record-default field values and malformed-field fallback tests) to track additional `records.hrl` surface.
- Expanded `map2rec` record-materialization coverage with `layer2` conversion (including record-default field values and malformed-field fallback tests) to track additional `records.hrl` surface.
- Expanded `map2rec` record-materialization coverage with `layer_spec` conversion (including typed integer field fallback behavior) to track additional `records.hrl` surface.
- Expanded `map2rec` record-materialization coverage with `neurode` conversion (including defaults and malformed-field fallback tests) to track additional `records.hrl` surface.
- Tightened `records.hrl` field-level parity by typing `agent`/`specie`/`population` map2rec strategy fields (`tuning_duration_f`, `mutation_operators`, `tot_topological_mutations_f`, distinguishers, morphologies) and wiring `agent`/`population`/`specie` record materialization into `run --config` request mapping (including nested `population.trace.step_size` fallback and mutation-weight derivation from `agent.mutation_operators` when no explicit weights are present).
- Added versioned map2rec record-envelope codecs for the full `records.hrl` surface (`schema_version`/`codec_version` + kind-tagged payload), with round-trip coverage across all 31 record kinds and explicit mismatch/unsupported-kind tests.
- Expanded benchmark artifact parity by persisting series-level best-fitness summary stats (`best_mean`/`best_std`/`best_min`/`best_max`) in `benchmark_summary.json`, with CLI output and regression coverage.

## Highest-priority remaining gaps to reach strict parity

1. Full scape behavior depth parity for complex environment families (`flatland`, `gtsa`, `fx`, `pole2-balancing`, `dtm`, `epitopes`, `llvm` workflows).
2. Residual operator/policy breadth around substrate-runtime interaction helpers.
3. Full substrate CPP/CEP behavioral parity beyond baseline scaffolding.
4. Utility ecosystem parity (`data_extractor`, full `epitopes` dataset/ETS workflow) if required by target workflows.
